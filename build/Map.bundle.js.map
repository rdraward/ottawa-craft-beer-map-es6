{"version":3,"sources":["webpack:///webpack/bootstrap 1a3e1e1cbe8f1d6c1195","webpack:///./src/Map.js","webpack:///./src/BrewMap.js","webpack:///./src/components/User.js","webpack:///./src/components/Marker.js","webpack:///./src/properties/map-props.js","webpack:///./src/mapsApi/mapsService.js","webpack:///./src/components/Brewery.js","webpack:///./src/utils/infoBox.js","webpack:///./src/utils/bounds.js","webpack:///./src/utils/distance.js","webpack:///./src/mapsApi/directionsService.js"],"names":["initMap","window","BrewMap","brewpubsHidden","closestIsBrewpub","breweries","user","controls","setupCustomControls","google","maps","ControlPosition","BOTTOM","push","nearbySearch","location","lat","lng","keyword","radius","populateMap","bind","addBeaus","navigator","geolocation","getCurrentPosition","userPos","position","coords","latitude","longitude","addUserMarker","firstElementChild","disabled","console","log","error","baseBreweryInfo","status","pagination","places","PlacesServiceStatus","OK","breweryExtras","breweryRecommendations","find","b","placeId","indexOf","i","place_id","length","toggleBrewpubVisibility","splice","hasNextPage","nextPage","customControls","document","createElement","className","appendChild","setupClosestBreweryButton","setupBrewpubFilter","closestBrewreyButton","type","value","onclick","filter","checkbox","checked","id","onchange","applyBrewpubVisibility","label","htmlFor","createTextNode","state","User","marker","getPosition","Marker","icon","title","map","addListener","setZIndex","MAX_ZINDEX","action","styledBrewMap","iconBase","ottawaLatLong","beausLatLong","initGMap","initGService","Map","getElementById","center","zoom","minZoom","clickableIcons","mapTypeControlOptions","mapTypeIds","mapTypes","set","StyledMapType","name","setMapTypeId","placesService","directionsService","PlacesService","DirectionsService","Brewery","baseInfo","extraInfo","brewery","createMarker","bindBreweryAndInfoBox","info","geometry","infoboxContents","requestAdditionalInfo","getDetails","place","recommendation","brewpub","setVisible","drawInfobox","formatDetails","infobox","content","close","InfoWindow","open","breweryFeature","currentDay","getCurrentDay","openClass","opening_hours","open_now","openHours","weekday_text","writeWeekdayLine","infoBox","website","vicinity","formatted_phone_number","writeRecommendation","recDivText","splitRecommendation","split","weekdayText","date","Date","getDay","limitMapScroll","createLatLng","allowedBounds","LatLngBounds","lastValidCenter","getCenter","event","contains","panTo","LatLng","findNearestBrewery","distance","shortestDistance","closestBreweryPos","breweryPos","calculateLatLongDistance","drawPath","R","p1","p2","φ1","toRadians","φ2","Δλ","Math","acos","sin","cos","x","PI","request","origin","destination","travelMode","route","result","setDirections","initDirService","directionsDisplay","DirectionsRenderer","suppressMarkers","setMap"],"mappings":"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","file":"Map.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1a3e1e1cbe8f1d6c1195","import BrewMap from './BrewMap';\r\nimport {\r\n    initGMap,\r\n    initGService\r\n} from './mapsApi/mapsService';\r\nimport {\r\n  initDirService\r\n} from './mapsApi/directionsService';\r\n\r\nconst initMap = () => {\r\n    initGMap();\r\n    initGService();\r\n    initDirService();\r\n    new BrewMap();\r\n}\r\n\r\nwindow.initMap = initMap;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Map.js","import User from './components/User';\r\nimport Brewery from './components/Brewery';\r\nimport {\r\n  map,\r\n  placesService\r\n} from './mapsApi/mapsService';\r\nimport {\r\n  createLatLng,\r\n  limitMapScroll\r\n} from './utils/bounds';\r\nimport {\r\n  beausLatLong,\r\n  ottawaLatLong\r\n} from './properties/map-props';\r\nimport\r\n  findNearestBrewery\r\nfrom './utils/distance';\r\n\r\nexport default class BrewMap {\r\n\r\n    constructor() {\r\n        this.brewpubsHidden = false;\r\n        this.closestIsBrewpub = false;\r\n        this.breweries = [];\r\n        this.user = {};\r\n\r\n        limitMapScroll(map);\r\n        const controls = this.setupCustomControls();\r\n        map.controls[google.maps.ControlPosition.BOTTOM].push(controls);\r\n\r\n        // make the request to get the brewery data on load\r\n        placesService.nearbySearch({\r\n            location: createLatLng(ottawaLatLong.lat, ottawaLatLong.lng),\r\n            keyword: 'brewery',\r\n            radius: '50000'\r\n        }, this.populateMap.bind(this));\r\n\r\n        // Vankleek is too far to be captured by the places search\r\n        // so do one specifically for Beaus\r\n        this.addBeaus();\r\n\r\n        // add personal location - GET ME TO CLOSEST BEER\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(position => {\r\n                const userPos = {\r\n                    lat: position.coords.latitude,\r\n                    lng: position.coords.longitude\r\n                };\r\n                this.user = this.addUserMarker(userPos);\r\n                // enable nearest brewery function once request returns\r\n                controls.firstElementChild.disabled = false;\r\n\r\n            }, error => console.log(error));\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Add the user to the map\r\n     */\r\n    addUserMarker(userPos) {\r\n        return new User(userPos);\r\n    }\r\n\r\n    /*\r\n     * Callback from getting the initial brewery data\r\n     */\r\n    populateMap(baseBreweryInfo, status, pagination) {\r\n        if (status === google.maps.places.PlacesServiceStatus.OK) {\r\n            for (let i = 0; i < baseBreweryInfo.length; i++) {\r\n                const breweryExtras = breweryRecommendations.find(\r\n                    b => b.placeId.indexOf(baseBreweryInfo[i].place_id) != -1\r\n                );\r\n\r\n                if (breweryExtras) {\r\n                    this.breweries.push(new Brewery(baseBreweryInfo[i], breweryExtras));\r\n                    this.breweries[this.breweries.length - 1].toggleBrewpubVisibility(!this.brewpubsHidden);\r\n                } else {\r\n                    // remove extra results\r\n                    baseBreweryInfo.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n\r\n            if (pagination.hasNextPage) {\r\n                pagination.nextPage();\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Add in Beau's Brewery\r\n     */\r\n    addBeaus() {\r\n      placesService.nearbySearch({\r\n          location: createLatLng(beausLatLong.lat, beausLatLong.lng),\r\n          keyword: 'brewery',\r\n          radius: '50000'\r\n      }, this.populateMap.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Add custom map controls\r\n     */\r\n    setupCustomControls() {\r\n      let customControls = document.createElement('div');\r\n      customControls.className = 'custom-controls gm-svpc';\r\n\r\n      customControls.appendChild(this.setupClosestBreweryButton());\r\n      customControls.appendChild(this.setupBrewpubFilter())\r\n\r\n      return customControls;\r\n    }\r\n\r\n    /**\r\n     * Build button to display path from user to closest brewery\r\n     */\r\n    setupClosestBreweryButton() {\r\n      let closestBrewreyButton = document.createElement('input');\r\n      closestBrewreyButton.type = 'button';\r\n      closestBrewreyButton.className = 'closest-brewery';\r\n      closestBrewreyButton.value = 'Bring me to the closest brewery!';\r\n      closestBrewreyButton.disabled = true;\r\n      closestBrewreyButton.onclick = () => {\r\n        this.closestIsBrewpub = findNearestBrewery(this.user, this.breweries, this.brewpubsHidden);\r\n      }\r\n\r\n      return closestBrewreyButton;\r\n    }\r\n\r\n    /*\r\n     * Build and enable the brewpub filter button\r\n     */\r\n    setupBrewpubFilter() {\r\n        let filter = document.createElement('div');\r\n        filter.className = 'brewpub-filter';\r\n\r\n        let checkbox = document.createElement('input');\r\n        checkbox.type = 'checkbox';\r\n        checkbox.checked = this.brewpubsHidden;\r\n        checkbox.id = 'brewpub-filter-check';\r\n        checkbox.onchange = () => {\r\n            this.brewpubsHidden = !this.brewpubsHidden;\r\n            this.applyBrewpubVisibility(this.brewpubsHidden);\r\n            if(this.brewpubsHidden && this.closestIsBrewpub) {\r\n              findNearestBrewery(this.user, this.breweries, this.brewpubsHidden);\r\n            }\r\n        };\r\n\r\n        let label = document.createElement('label')\r\n        label.htmlFor = 'brewpub-filter-check';\r\n        label.className = 'roboto';\r\n        label.appendChild(document.createTextNode('Hide brewpubs'));\r\n\r\n        filter.appendChild(checkbox);\r\n        filter.appendChild(label);\r\n        return filter;\r\n    }\r\n\r\n    /*\r\n     * Toggle brewpub visibility\r\n     */\r\n    applyBrewpubVisibility(state) {\r\n        for (let i = 0; i < this.breweries.length; i++) {\r\n            this.breweries[i].toggleBrewpubVisibility(!state);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/BrewMap.js","import Marker from './Marker';\r\n\r\n// DO SOMETHING ELSE WITH THIS OR REMOVE CLASS????\r\nexport default class User {\r\n    constructor(userPos) {\r\n        this.marker = new Marker(userPos, 'small-beer.png', 'Your current location!');\r\n    }\r\n\r\n    getPosition() {\r\n      return this.marker.getPosition();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/User.js","import {\r\n    iconBase\r\n} from '../properties/map-props';\r\nimport {\r\n    map\r\n} from '../mapsApi/mapsService';\r\n\r\nexport default class Marker {\r\n    constructor(userPos, icon, title) {\r\n        this.marker = new google.maps.Marker({\r\n            position: userPos,\r\n            map: map,\r\n            icon: iconBase + icon,\r\n            title: title\r\n        });\r\n        // mouseover icon brought to front\r\n        this.marker.addListener('mouseover', () => this.marker.setZIndex(google.maps.Marker.MAX_ZINDEX));\r\n        this.marker.addListener('mouseout', () => this.marker.setZIndex(google.maps.Marker.MAX_ZINDEX - 1))\r\n    }\r\n\r\n    addCallback(type, action) {\r\n        this.marker.addListener(type, action);\r\n    }\r\n\r\n    getPosition() {\r\n        return this.marker.position;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/Marker.js","export const styledBrewMap = [\r\n  {\r\n    \"featureType\": \"landscape.man_made\",\r\n    \"elementType\": \"geometry\",\r\n    \"stylers\": [\r\n      {\r\n        \"color\": \"#8dd3c7\"\r\n      },\r\n      {\r\n        \"lightness\": 75\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"featureType\": \"landscape.natural\",\r\n    \"elementType\": \"geometry\",\r\n    \"stylers\": [\r\n      {\r\n        \"color\": \"#b3de69\"\r\n      },\r\n      {\r\n        \"lightness\": 65\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"featureType\": \"road\",\r\n    \"elementType\": \"geometry\",\r\n    \"stylers\": [\r\n      {\r\n        \"visibility\": \"simplified\",\r\n        \"color\": \"#ffffb3\"\r\n      },\r\n      {\r\n        \"lightness\": 25\r\n      },\r\n      {\r\n        \"weight\": 1\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"featureType\": \"water\",\r\n    \"elementType\": \"geometry\",\r\n    \"stylers\": [\r\n      {\r\n        \"color\": \"#80b1d3\"\r\n      },\r\n      {\r\n        \"lightness\": 10\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nexport const iconBase = 'icons/';\r\n\r\nexport const ottawaLatLong = {\r\n    lat: 45.3815,\r\n    lng: -75.7072\r\n};\r\n\r\nexport const beausLatLong = {\r\n  lat: 45.5169,\r\n  lng: -74.6372\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/properties/map-props.js","import {\r\n    styledBrewMap,\r\n    ottawaLatLong\r\n} from '../properties/map-props';\r\n\r\nexport let map = null;\r\nexport function initGMap() {\r\n    if (!map) {\r\n        map = new google.maps.Map(document.getElementById('map'), {\r\n            center: ottawaLatLong,\r\n            zoom: 12,\r\n            minZoom: 11,\r\n            clickableIcons: false,\r\n            mapTypeControlOptions: {\r\n                mapTypeIds: ['roadmap', 'satellite', 'hybrid', 'terrain', 'brew_map']\r\n            }\r\n        });\r\n\r\n        map.mapTypes.set('brew_map', new google.maps.StyledMapType(styledBrewMap, {\r\n            name: 'BrewMap'\r\n        }));\r\n        map.setMapTypeId('brew_map');\r\n    }\r\n}\r\n\r\n\r\n// set up singleton for service\r\nexport let placesService = null;\r\nexport let directionsService = null;\r\nexport function initGService() {\r\n    if (!placesService) {\r\n        placesService = new google.maps.places.PlacesService(map);\r\n    }\r\n\r\n    if (!directionsService) {\r\n        directionsService = new google.maps.DirectionsService();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mapsApi/mapsService.js","import Marker from './Marker';\r\nimport {\r\n    placesService\r\n} from '../mapsApi/mapsService';\r\nimport {\r\n    drawInfobox,\r\n    formatDetails\r\n} from '../utils/infoBox';\r\n\r\nexport default class Brewery {\r\n    constructor(baseInfo, extraInfo) {\r\n        this.baseInfo = baseInfo;\r\n        this.extraInfo = extraInfo;\r\n        if (extraInfo.icon) {\r\n            this.brewery = this.createMarker(baseInfo, extraInfo.icon);\r\n            this.bindBreweryAndInfoBox();\r\n        }\r\n    }\r\n\r\n    createMarker(info, icon) {\r\n        return new Marker(info.geometry.location, icon);\r\n    }\r\n\r\n    bindBreweryAndInfoBox() {\r\n        this.brewery.marker.addListener('click', () => {\r\n            if (!this.infoboxContents) {\r\n                this.requestAdditionalInfo(this.baseInfo.place_id);\r\n            } else {\r\n                drawInfobox(this.infoboxContents, this.brewery.marker)\r\n            }\r\n        });\r\n    }\r\n\r\n    requestAdditionalInfo(placeId) {\r\n        placesService.getDetails({\r\n            placeId: placeId\r\n        }, (place, status) => {\r\n            if (status === google.maps.places.PlacesServiceStatus.OK) {\r\n                this.info = place;\r\n                this.infoboxContents = formatDetails(this.info, this.extraInfo.recommendation);\r\n                drawInfobox(this.infoboxContents, this.brewery.marker);\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleBrewpubVisibility(state) {\r\n      if(this.extraInfo.brewpub) {\r\n        this.brewery.marker.setVisible(state);\r\n      }\r\n    }\r\n\r\n    getPosition() {\r\n      return this.brewery.getPosition();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Brewery.js","import {\r\n    map\r\n} from '../mapsApi/mapsService';\r\n\r\n// ensures we only have a single infobox open at a single time\r\nlet infobox = null;\r\nexport function drawInfobox(content, marker) {\r\n    if (infobox) {\r\n        infobox.close();\r\n    }\r\n    infobox = new google.maps.InfoWindow({\r\n        content: content\r\n    });\r\n\r\n    infobox.open(map, marker);\r\n}\r\n\r\n/*\r\n * Format the text contained in the info box\r\n *\r\n * @param {Object}\r\n *\t\tbreweryFeature - hopefully self-explanatory (the json to format)\r\n */\r\nexport function formatDetails(info, recommendation) {\r\n    const breweryFeature = info;\r\n    const currentDay = getCurrentDay();\r\n    const openClass = breweryFeature.opening_hours && breweryFeature.opening_hours.open_now ? 'open' : 'closed';\r\n\r\n    let openHours = \"<div><p class='remove-margin'>\";\r\n    // NOTE: for some reason, Stray Dog doesn't have hours\r\n    if(breweryFeature.opening_hours) {\r\n      for (let i = 0; i < breweryFeature.opening_hours.weekday_text.length; i++) {\r\n          if (currentDay === ((i + 1) % 7)) {\r\n              openHours += \"</p><p class='\" + openClass + \" remove-margin'>\";\r\n              openHours += writeWeekdayLine(breweryFeature.opening_hours.weekday_text[i]);\r\n              openHours += \"</p>\";\r\n          } else {\r\n              openHours += writeWeekdayLine(breweryFeature.opening_hours.weekday_text[i]);\r\n          }\r\n      }\r\n    } else {\r\n      openHours += 'Unknown - no data provided!</br></br>Check the brewery website or the Yellow Pages.';\r\n    }\r\n    openHours += \"</p></div>\";\r\n\r\n    const infoBox = \"<div class='info-box'>\" +\r\n        \"<h3>\" + breweryFeature.name + \"</h3>\" +\r\n        \"<div id='contact-box'>\" +\r\n        \"<a href='\" + breweryFeature.website + \"' target='_blank'>\" + breweryFeature.website + \"</a>\" +\r\n        \"<p>\" + breweryFeature.vicinity + \"</p>\" +\r\n        \"<p>\" + breweryFeature.formatted_phone_number + \"</p>\" +\r\n        \"</div>\" +\r\n        \"<div id='hours-box'>\" +\r\n        \"<p><b>Hours:</b></p>\" +\r\n        \"<p>\" + openHours + \"</p>\" +\r\n        \"</div>\" +\r\n        \"<div id='recommendation-box'>\" +\r\n        \"<p><b>Recommendation:</b></p>\" +\r\n        \"<p>\" + writeRecommendation(recommendation) + \"</p>\" +\r\n        \"</div>\" +\r\n        \"</div>\"\r\n    return infoBox;\r\n}\r\n\r\nfunction writeRecommendation(recommendation) {\r\n    let recDivText = 'Coming Soon!';\r\n\r\n    if (recommendation) {\r\n        let splitRecommendation = recommendation.split(';');\r\n        recDivText = splitRecommendation[0] + \"<br> \" + splitRecommendation[1] + \"<br><br> \" + splitRecommendation[2];\r\n    }\r\n\r\n    return recDivText;\r\n}\r\n\r\nfunction writeWeekdayLine(weekdayText) {\r\n    return weekdayText + \"<br>\";\r\n}\r\n\r\nfunction getCurrentDay() {\r\n    const date = new Date();\r\n    return date.getDay();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/infoBox.js","export function limitMapScroll(map) {\r\n    // bounds of the desired area\r\n    const allowedBounds = new google.maps.LatLngBounds(\r\n        createLatLng(45.14115518089034, -76.15005880565646),\r\n        createLatLng(45.51227041310074, -74.58660896976092)\r\n    );\r\n    let lastValidCenter = map.getCenter();\r\n\r\n    google.maps.event.addListener(map, 'center_changed', () => {\r\n        if (allowedBounds.contains(map.getCenter())) {\r\n            // still within valid bounds, so save the last valid position\r\n            lastValidCenter = map.getCenter();\r\n            return;\r\n        }\r\n        // not valid anymore => return to last valid position\r\n        map.panTo(lastValidCenter);\r\n    });\r\n}\r\n\r\nexport function createLatLng(lat, lng) {\r\n    return new google.maps.LatLng(lat, lng);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/bounds.js","import {\r\n  directionsService, directionsDisplay\r\n} from '../mapsApi/directionsService';\r\n\r\nexport default function findNearestBrewery(user, breweries, brewpubsHidden) {\r\n  const userPos = user.getPosition();\r\n  let distance = null;\r\n  let shortestDistance = -1;\r\n  let closestBreweryPos = null;\r\n  let closestIsBrewpub = false;\r\n\r\n  for(let i = 0; i < breweries.length; i++) {\r\n    const brewpub = breweries[i].extraInfo.brewpub;\r\n    if(!brewpubsHidden || !brewpub) {\r\n      const breweryPos = breweries[i].getPosition();\r\n      distance = calculateLatLongDistance(userPos, breweryPos);\r\n\r\n      if(shortestDistance > distance || shortestDistance === -1) {\r\n        shortestDistance = distance;\r\n        closestBreweryPos = breweryPos;\r\n        closestIsBrewpub = brewpub;\r\n      }\r\n    }\r\n  }\r\n\r\n  drawPath(userPos, closestBreweryPos);\r\n  // redraw if closest is brewpub and flip filter\r\n  return closestIsBrewpub;\r\n}\r\n\r\n// formula from http://www.movable-type.co.uk/scripts/latlong.html\r\n// doing 'dumb' distance to start\r\n// another option - take 3(?) closest and find shortest actual travel distance\r\nconst R = 6371e3;\r\nfunction calculateLatLongDistance(p1, p2) {\r\n  const φ1 = toRadians(p1.lat()), φ2 = toRadians(p2.lat()), Δλ = toRadians(p2.lng()-p1.lng());\r\n  return Math.acos( Math.sin(φ1) * Math.sin(φ2) + Math.cos(φ1) * Math.cos(φ2) * Math.cos(Δλ) ) * R;\r\n}\r\n\r\nfunction toRadians(x) {\r\n  return x * Math.PI / 180;\r\n}\r\n\r\nfunction drawPath(userPos, breweryPos) {\r\n  const request = {\r\n    origin: userPos,\r\n    destination: breweryPos,\r\n    travelMode: 'DRIVING'\r\n  };\r\n  directionsService.route(request, (result, status) => {\r\n    if(status === 'OK') {\r\n      directionsDisplay.set('directions', null);\r\n      directionsDisplay.setDirections(result);\r\n    }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/distance.js","import {\r\n  map\r\n} from './mapsService';\r\n\r\nexport let directionsService = null;\r\nexport let directionsDisplay = null;\r\nexport function initDirService() {\r\n    if (!directionsService) {\r\n        directionsService = new google.maps.DirectionsService();\r\n    }\r\n    if(!directionsDisplay) {\r\n      directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true});\r\n      directionsDisplay.setMap(map);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mapsApi/directionsService.js"],"sourceRoot":""}